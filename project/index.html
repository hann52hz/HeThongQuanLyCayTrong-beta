<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Hệ Thống Quản Lý Cây Trồng</title>
    <link rel="icon" href="image/icon.png" type="image/png" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.2/font/bootstrap-icons.css"
      rel="stylesheet"
    />
    <link href="css/styles.css" rel="stylesheet" />
  </head>
  <body>
    <div class="container">
      <header class="mb-4">
        <h1 class="text-center">Hệ Thống Quản Lý Cây Trồng</h1>

        <nav class="nav-buttons">
          <button class="btn btn-primary" onclick="showSection('overview')">
            <i class="bi bi-grid-1x2-fill"></i> Tổng Quan
          </button>
          <button class="btn btn-secondary" onclick="showSection('list')">
            <i class="bi bi-tree-fill"></i> Danh Sách Cây
          </button>
          <button class="btn btn-success" onclick="showSection('add')">
            <i class="bi bi-plus-circle-fill"></i> Thêm Cây Mới
          </button>
          <button
            class="btn btn-info text-white"
            onclick="showSection('report')"
          >
            <i class="bi bi-file-earmark-text-fill"></i> Báo Cáo
          </button>
        </nav>
      </header>

      <main>
        <!-- Overview Section -->
        <section id="overview" class="section active">
          <div class="stats-container">
            <div class="stat-card">
              <i class="bi bi-tree-fill icon"></i>
              <h3>Tổng Số Cây</h3>
              <div class="number" id="totalTrees">0</div>
            </div>
            <div class="stat-card">
              <i class="bi bi-heart-fill icon"></i>
              <h3>Cây Cần Chăm Sóc</h3>
              <div class="number" id="needCare">0</div>
            </div>
            <div class="stat-card">
              <i class="bi bi-plus-circle-fill icon"></i>
              <h3>Cây Mới Trồng</h3>
              <div class="number" id="newTrees">0</div>
            </div>
          </div>

          <div class="chart-section">
            <h3 class="text-center mb-4">Phân Bố Tình Trạng Cây Trồng</h3>
            <div class="chart-container">
              <canvas id="statusChart"></canvas>
            </div>
          </div>
        </section>

        <!-- List Section -->
        <section id="list" class="section">
          <div class="search-container">
            <div class="row">
              <div class="col-md-6">
                <input
                  type="text"
                  id="searchInput"
                  class="form-control"
                  placeholder="Nhập từ khóa tìm kiếm..."
                />
              </div>
              <div class="col-md-4">
                <select id="searchType" class="form-select">
                  <option value="code">Mã cây</option>
                  <option value="name">Tên cây</option>
                  <option value="type">Loại cây</option>
                </select>
              </div>
              <div class="col-md-2">
                <button class="btn btn-primary w-100" onclick="performSearch()">
                  <i class="bi bi-search"></i> Tìm kiếm
                </button>
              </div>
            </div>
          </div>

          <div class="table-responsive">
            <table class="table">
              <thead>
                <tr>
                  <th>Mã Cây</th>
                  <th>Tên Cây</th>
                  <th>Loại Cây</th>
                  <th>Ngày Trồng</th>
                  <th>Tình Trạng</th>
                  <th>Thao Tác</th>
                </tr>
              </thead>
              <tbody id="treeList"></tbody>
            </table>
          </div>
        </section>

        <!-- Add/Edit Tree Section -->
        <section id="add" class="section">
          <form id="addTreeForm" class="needs-validation" novalidate>
            <div class="mb-3">
              <label class="form-label" for="treeCode">Mã Cây:</label>
              <input type="text" class="form-control" id="treeCode" required />
              <div class="invalid-feedback">Vui lòng nhập mã cây</div>
            </div>
            <div class="mb-3">
              <label class="form-label" for="treeName">Tên Cây:</label>
              <input type="text" class="form-control" id="treeName" required />
              <div class="invalid-feedback">Vui lòng nhập tên cây</div>
            </div>
            <div class="mb-3">
              <label class="form-label" for="treeType">Loại Cây:</label>
              <select class="form-select" id="treeType" required>
                <option value="">Chọn loại cây</option>
                <option value="Cây Cảnh">Cây Cảnh</option>
                <option value="Cây Ăn Trái">Cây Ăn Trái</option>
                <option value="Cây Bóng Mát">Cây Bóng Mát</option>
              </select>
              <div class="invalid-feedback">Vui lòng chọn loại cây</div>
            </div>
            <div class="mb-3">
              <label class="form-label" for="plantDate">Ngày Trồng:</label>
              <input type="date" class="form-control" id="plantDate" required />
              <div class="invalid-feedback">Vui lòng chọn ngày trồng</div>
            </div>
            <div class="mb-3">
              <label class="form-label" for="treeStatus">Tình Trạng:</label>
              <select class="form-select" id="treeStatus" required>
                <option value="">Chọn tình trạng</option>
                <option value="Tốt">Tốt</option>
                <option value="Cần Chăm Sóc">Cần Chăm Sóc</option>
              </select>
              <div class="invalid-feedback">Vui lòng chọn tình trạng</div>
            </div>
            <div class="d-grid gap-2">
              <button type="submit" class="btn btn-primary">
                <i class="bi bi-save"></i> Lưu
              </button>
              <button
                type="button"
                class="btn btn-secondary"
                onclick="resetForm()"
              >
                <i class="bi bi-arrow-counterclockwise"></i> Làm mới
              </button>
            </div>
          </form>
        </section>

        <!-- Report Section -->
        <section id="report" class="section">
          <div class="chart-section">
            <div class="row">
              <div class="col-md-6 mb-4">
                <h3 class="text-center mb-4">Thống kê theo loại cây</h3>
                <div class="chart-container">
                  <canvas id="typeChart"></canvas>
                </div>
              </div>
              <div class="col-md-6 mb-4">
                <h3 class="text-center mb-4">Thống kê tình trạng</h3>
                <div class="chart-container">
                  <canvas id="statusReportChart"></canvas>
                </div>
              </div>
            </div>
          </div>
        </section>
      </main>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="js/config.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/search.js"></script>
    <script src="js/charts.js"></script>
    <script src="js/treeOperations.js"></script>
    <script src="js/main.js"></script>
  </body>
</html>
